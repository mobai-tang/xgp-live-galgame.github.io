<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>春日樱庭的执念与温柔</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #f9f0ff 0%, #e6f7ff 100%);
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
            padding: 10px;
        }
        
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            min-height: 95vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 3px solid #ff758c;
            position: relative;
        }
        
        .header h1 {
            font-size: 1.8rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            margin-bottom: 5px;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }
        
        /* 场景描述样式 */
        .scene-description {
            background-color: #f8f9fa;
            border-left: 5px solid #6ab0de;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        /* 对话框样式 */
        .dialogue-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
        }
        
        .character-dialogue {
            background-color: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        
        .character-name {
            display: inline-block;
            background-color: #6ab0de;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        
        .dialogue-text {
            font-size: 1.05rem;
            line-height: 1.7;
            color: #333;
        }
        
        .character-avatar {
            position: absolute;
            bottom: -10px;
            right: 15px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            object-fit: cover;
        }
        
        /* 选项样式 */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 10px;
        }
        
        .option-btn {
            background-color: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 16px;
            text-align: left;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .option-btn:hover, .option-btn:active {
            background-color: #f0f7ff;
            border-color: #6ab0de;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(106, 176, 222, 0.2);
        }
        
        .option-btn:active {
            transform: translateY(-1px);
        }
        
        .option-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background-color: #6ab0de;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .option-btn:hover::after {
            opacity: 0.3;
        }
        
        /* 角色选择页面 */
        .character-select {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 20px 0;
        }
        
        .character-card {
            width: 90%;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }
        
        .character-card:hover {
            transform: translateY(-5px);
        }
        
        .character-card.selected {
            box-shadow: 0 0 0 3px #ff758c, 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .character-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .character-info {
            padding: 15px;
        }
        
        .character-info h3 {
            color: #333;
            margin-bottom: 5px;
            font-size: 1.3rem;
        }
        
        .character-info p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        /* 创建名字页面 */
        .name-creation {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px;
            gap: 20px;
        }
        
        .name-input-container {
            width: 100%;
            max-width: 400px;
        }
        
        .name-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #6ab0de;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 10px;
        }
        
        .name-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(106, 176, 222, 0.3);
        }
        
        .btn {
            background: linear-gradient(90deg, #6ab0de 0%, #4a90e2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            max-width: 300px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(106, 176, 222, 0.4);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: linear-gradient(90deg, #ff9a9e 0%, #fad0c4 100%);
        }
        
        /* 游戏状态栏 */
        .status-bar {
            display: flex;
            justify-content: space-between;
            background-color: #f8f9fa;
            padding: 12px 20px;
            border-top: 2px solid #e0e0e0;
            font-size: 0.9rem;
            color: #666;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* 结局页面 */
        .ending-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px;
            text-align: center;
            gap: 25px;
        }
        
        .ending-title {
            color: #ff758c;
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .ending-image {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .ending-description {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #444;
            max-width: 600px;
        }
        
        /* 隐藏元素 */
        .hidden {
            display: none !important;
        }
        
        /* 响应式调整 */
        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .character-dialogue {
                padding: 15px;
            }
            
            .dialogue-text {
                font-size: 1rem;
            }
            
            .character-avatar {
                width: 50px;
                height: 50px;
            }
            
            .option-btn {
                padding: 14px;
            }
        }
        
        /* 心情指示器 */
        .mood-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 8px;
        }
        
        .mood-heart {
            color: #ff6b8b;
            font-size: 0.9rem;
        }
        
        /* 隐藏触发提示 */
        .hidden-trigger {
            font-size: 0.8rem;
            color: #ff6b8b;
            margin-top: 5px;
            font-style: italic;
        }
        
        /* 选择确认 */
        .selection-confirm {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .confirm-box {
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .confirm-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: center;
        }
        
        .confirm-btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            min-width: 80px;
        }
        
        .confirm-yes {
            background-color: #6ab0de;
            color: white;
        }
        
        .confirm-no {
            background-color: #e0e0e0;
            color: #333;
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- 游戏标题页 -->
        <div id="title-screen" class="main-content">
            <div class="header">
                <h1>春日樱庭的执念与温柔</h1>
                <div class="subtitle">一场关于爱与选择的浪漫故事</div>
            </div>
            
            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; text-align: center;">
                <div style="font-size: 1.3rem; margin-bottom: 30px; color: #555; line-height: 1.6;">
                    樱花盛开的季节，四位性格各异的女孩，<br>一场命中注定的相遇，你将如何选择？
                </div>
                
                <div style="width: 200px; height: 200px; background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%); border-radius: 50%; margin-bottom: 30px; display: flex; justify-content: center; align-items: center;">
                    <i class="fas fa-heart" style="font-size: 80px; color: white;"></i>
                </div>
                
                <button id="start-btn" class="btn" style="max-width: 250px;">
                    <i class="fas fa-play" style="margin-right: 10px;"></i>开始游戏
                </button>
                
                <div style="margin-top: 40px; color: #888; font-size: 0.9rem;">
                    <div style="margin-bottom: 10px;">• 14种不同结局等待解锁</div>
                    <div style="margin-bottom: 10px;">• 你的选择将决定故事走向</div>
                    <div>• 隐藏剧情随机触发</div>
                </div>
            </div>
        </div>
        
        <!-- 创建名字页面 -->
        <div id="name-creation-screen" class="main-content hidden">
            <div class="header">
                <h1>创建你的角色</h1>
                <div class="subtitle">输入你的名字，开始这场浪漫之旅</div>
            </div>
            
            <div class="name-creation">
                <div style="font-size: 1.2rem; color: #555; margin-bottom: 10px; text-align: center;">
                    请输入你的名字，这将成为故事中大家对你的称呼
                </div>
                
                <div class="name-input-container">
                    <input type="text" id="player-name" class="name-input" placeholder="请输入你的名字" maxlength="10" value="主角">
                    <div style="font-size: 0.9rem; color: #999; text-align: center;">名字长度限制为2-10个字符</div>
                </div>
                
                <button id="confirm-name-btn" class="btn">确认名字</button>
                
                <div style="margin-top: 30px; color: #666; font-size: 1rem; text-align: center; max-width: 500px; line-height: 1.6;">
                    <p>故事发生在暮春时节的「樱见庭」，漫天樱花飞舞，你将与四位女孩相遇，展开一段浪漫而复杂的关系。</p>
                </div>
            </div>
        </div>
        
        <!-- 角色选择页面 -->
        <div id="character-select-screen" class="main-content hidden">
            <div class="header">
                <h1>选择你的攻略对象</h1>
                <div class="subtitle">选择一位女孩开始你的故事，其他角色也会在故事中出现</div>
            </div>
            
            <div class="character-select">
                <div style="font-size: 1.1rem; color: #555; margin-bottom: 10px; text-align: center; padding: 0 20px;">
                    请选择一位你想要攻略的女孩，你的选择将影响故事的主线发展
                </div>
                
                <div class="character-card" data-character="白粥">
                    <img src="https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg" alt="白粥" class="character-image">
                    <div class="character-info">
                        <h3>白粥 (25岁)</h3>
                        <p>御姐人设，红发大波浪，身材火辣，性格直率洒脱，毒舌却心软。看似高冷实则会默默照顾身边人。</p>
                        <div class="mood-indicator">
                            <span class="mood-heart">❤️</span>
                            <span class="mood-heart">❤️</span>
                            <span class="mood-heart">❤️</span>
                            <span>好感度: 30</span>
                        </div>
                    </div>
                </div>
                
                <div class="character-card" data-character="稀音">
                    <img src="https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg" alt="稀音" class="character-image">
                    <div class="character-info">
                        <h3>稀音 (23岁)</h3>
                        <p>究极病娇，黑长直发带浅紫挑染，表面温柔乖巧，实则对你有着极强的执念和占有欲。</p>
                        <div class="mood-indicator">
                            <span class="mood-heart">❤️</span>
                            <span class="mood-heart">❤️</span>
                            <span class="mood-heart">❤️</span>
                            <span class="mood-heart">❤️</span>
                            <span>好感度: 40</span>
                        </div>
                    </div>
                </div>
                
                <div class="character-card" data-character="十一">
                    <img src="https://free.picui.cn/free/2025/12/14/693e381736408.jpg" alt="十一" class="character-image">
                    <div class="character-info">
                        <h3>十一 (18岁)</h3>
                        <p>软萌甜妹，粉发双马尾，性格软乎乎容易害羞，喜欢跟在你身边，让人忍不住想呵护。</p>
                        <div class="mood-indicator">
                            <span class="mood-heart">❤️</span>
                            <span class="mood-heart">❤️</span>
                            <span>好感度: 20</span>
                        </div>
                    </div>
                </div>
                
                <div class="character-card" data-character="骑士">
                    <img src="https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg" alt="骑士" class="character-image">
                    <div class="character-info">
                        <h3>骑士 (24岁)</h3>
                        <p>古风摄影爱好者，气质沉稳内敛，拍照技术精湛，说话温和有礼，自带古风侠客的温润气场。</p>
                        <div class="mood-indicator">
                            <span class="mood-heart">❤️</span>
                            <span class="mood-heart">❤️</span>
                            <span>好感度: 25</span>
                        </div>
                    </div>
                </div>
                
                <button id="confirm-character-btn" class="btn" style="margin-top: 20px;">确认选择</button>
                
                <div class="hidden-trigger" style="margin-top: 10px;">
                    <i class="fas fa-exclamation-circle"></i> 选择后仍可与其他角色互动，可能触发隐藏剧情
                </div>
            </div>
        </div>
        
        <!-- 游戏主界面 -->
        <div id="game-screen" class="main-content hidden">
            <!-- 场景描述 -->
            <div id="scene-description" class="scene-description">
                暮春时节，城郊「樱见庭」——漫山樱花盛放，粉白花瓣铺满地。你们刚完成第一轮外景拍摄，围坐在观景台的石桌旁休息。
            </div>
            
            <!-- 对话容器 -->
            <div id="dialogue-container" class="dialogue-container">
                <!-- 对话将通过JavaScript动态添加 -->
            </div>
            
            <!-- 选项容器 -->
            <div id="options-container" class="options-container">
                <!-- 选项将通过JavaScript动态添加 -->
            </div>
        </div>
        
        <!-- 结局页面 -->
        <div id="ending-screen" class="main-content hidden">
            <div class="ending-container">
                <!-- 结局内容将通过JavaScript动态添加 -->
            </div>
        </div>
        
        <!-- 游戏状态栏 -->
        <div id="status-bar" class="status-bar hidden">
            <div class="status-item">
                <i class="fas fa-user"></i>
                <span id="player-name-display">主角</span>
            </div>
            <div class="status-item">
                <i class="fas fa-heart" style="color: #ff6b8b;"></i>
                <span id="main-character-display">未选择</span>
            </div>
            <div class="status-item">
                <i class="fas fa-route"></i>
                <span id="route-display">主线</span>
            </div>
        </div>
    </div>

    <!-- 选择确认弹窗 -->
    <div id="selection-confirm" class="selection-confirm hidden">
        <div class="confirm-box">
            <h3 id="confirm-title" style="margin-bottom: 15px; color: #333;">确认选择</h3>
            <p id="confirm-text" style="color: #555; line-height: 1.5;">你确定要选择这个选项吗？你的选择将影响故事走向。</p>
            <div class="confirm-buttons">
                <button id="confirm-yes" class="confirm-btn confirm-yes">确定</button>
                <button id="confirm-no" class="confirm-btn confirm-no">取消</button>
            </div>
        </div>
    </div>

    <script>
        // 游戏数据
        const gameData = {
            playerName: "主角",
            selectedCharacter: null,
            relationships: {
                白粥: {好感度: 30, 状态: "普通朋友", 解锁事件: 0},
                稀音: {好感度: 40, 状态: "普通朋友", 解锁事件: 0},
                十一: {好感度: 20, 状态: "普通朋友", 解锁事件: 0},
                骑士: {好感度: 25, 状态: "普通朋友", 解锁事件: 0}
            },
            currentScene: 0,
            currentRoute: "主线",
            endingsUnlocked: [],
            hiddenTriggered: false,
            hiddenChance: 0.1, // 10%隐藏触发概率
            choices: [],
            
            // 保存到localStorage
            save() {
                const saveData = {
                    playerName: this.playerName,
                    selectedCharacter: this.selectedCharacter,
                    relationships: this.relationships,
                    currentScene: this.currentScene,
                    currentRoute: this.currentRoute,
                    endingsUnlocked: this.endingsUnlocked,
                    hiddenTriggered: this.hiddenTriggered,
                    choices: this.choices
                };
                localStorage.setItem('galgameSave', JSON.stringify(saveData));
            },
            
            // 从localStorage加载
            load() {
                const saved = localStorage.getItem('galgameSave');
                if (saved) {
                    const saveData = JSON.parse(saved);
                    this.playerName = saveData.playerName || "主角";
                    this.selectedCharacter = saveData.selectedCharacter;
                    this.relationships = saveData.relationships || this.relationships;
                    this.currentScene = saveData.currentScene || 0;
                    this.currentRoute = saveData.currentRoute || "主线";
                    this.endingsUnlocked = saveData.endingsUnlocked || [];
                    this.hiddenTriggered = saveData.hiddenTriggered || false;
                    this.choices = saveData.choices || [];
                    return true;
                }
                return false;
            },
            
            // 重置游戏
            reset() {
                this.playerName = "主角";
                this.selectedCharacter = null;
                this.relationships = {
                    白粥: {好感度: 30, 状态: "普通朋友", 解锁事件: 0},
                    稀音: {好感度: 40, 状态: "普通朋友", 解锁事件: 0},
                    十一: {好感度: 20, 状态: "普通朋友", 解锁事件: 0},
                    骑士: {好感度: 25, 状态: "普通朋友", 解锁事件: 0}
                };
                this.currentScene = 0;
                this.currentRoute = "主线";
                this.endingsUnlocked = [];
                this.hiddenTriggered = false;
                this.choices = [];
                localStorage.removeItem('galgameSave');
            }
        };
        
        // 游戏场景数据
        const gameScenes = {
            // 第一幕：樱下初歇，温柔暗藏锋芒
            0: {
                场景描述: "风卷着樱花花瓣落在石桌的茶盏边缘，泛起一圈浅浅的涟漪。骑士刚收起相机镜头盖，转头就看到十一踮着脚尖，盯着三脚架上的相机屏幕。",
                对话: [
                    {角色: "十一", 文本: "骑士哥哥，刚刚拍的照片也太好看了吧！你把樱花落在白粥姐姐头发上的样子拍得好温柔，还有主角哥哥站在樱树下的画面，好像从古风小说里走出来的人一样，我、我可以再看一眼吗？", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "骑士", 文本: "当然可以，要是有喜欢的画面，我之后可以导出来发给你。刚刚拍你的时候，你抱着绣球花笑的样子很上镜，花瓣落在你发饰上，光影刚好，成片效果比预想中更好。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: "十一", 文本: "没、没有啦…我刚刚还紧张到忘记摆姿势，多亏主角哥哥一直在旁边温柔提醒我，不然肯定拍得很丑…", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "白粥", 文本: "哟，我们十一这是害羞了？刚刚拍互动镜头的时候，你抱着主角的胳膊，笑得眼睛都快眯成一条缝了，现在倒不好意思了？", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: "十一", 文本: "白粥姐姐！你、你别这么说嘛…我只是觉得和主角哥哥一起拍照很开心，没有别的意思…", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: gameData.playerName, 文本: "白粥你就别调侃她了，十一本来就容易害羞，刚刚拍摄的时候表现已经很好了。"},
                    {角色: "稀音", 文本: "主角哥哥说得对，十一妹妹年纪小，容易害羞，白粥姐姐确实不该这么调侃她。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg", 特殊: "稀音在说这句话的时候，指尖悄悄攥紧了放在膝盖上的裙摆，眼神深处闪过一丝不易察觉的阴霾。"},
                    {角色: "骑士", 文本: "接下来的拍摄计划，我之前和大家说过，先拍一组古风风格的单人照...", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"}
                ],
                选项: [
                    {文本: "看向稀音，对她微笑表示支持", 好感度变化: {稀音: 5}, 下一场景: 1},
                    {文本: "为十一解围，转移话题", 好感度变化: {十一: 5}, 下一场景: 1},
                    {文本: "调侃白粥，活跃气氛", 好感度变化: {白粥: 5}, 下一场景: 1},
                    {文本: "询问骑士接下来的拍摄细节", 好感度变化: {骑士: 5}, 下一场景: 1}
                ]
            },
            
            // 第二场景：拍摄开始
            1: {
                场景描述: "十分钟的休息时间过去了，骑士已经检查完相机设备，大家开始按照计划进行拍摄。",
                对话: [
                    {角色: "骑士", 文本: "设备都没问题，我们现在开始拍摄吧，先去竹林那边拍白粥的单人照。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: gameData.playerName, 文本: "好，我跟你去竹林那边，帮你搭把手调整一下道具。"},
                    {角色: "稀音", 文本: "主角哥哥要去和白粥姐姐拍照片了...", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg", 特殊: "稀音看着你离开的背影，眼神里的温柔瞬间褪去，指尖死死攥着裙摆。"},
                    {角色: "十一", 文本: "主角哥哥，等下白粥姐姐拍完照片，我们就可以拍互动镜头了对吗？我想拍牵手的镜头，还要拍靠在你肩膀上的镜头！", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: gameData.playerName, 文本: "当然可以，只要你喜欢，拍什么互动镜头都可以。"},
                    {角色: "白粥", 文本: "某人这是开启了照顾模式啊？不过不用特意担心我，我可没那么娇弱。", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"}
                ],
                选项: [
                    {文本: "专心帮骑士准备拍摄", 好感度变化: {骑士: 5}, 下一场景: 2},
                    {文本: "安慰稀音，让她别担心", 好感度变化: {稀音: 10}, 下一场景: 2, 隐藏检查: "稀音"},
                    {文本: "和十一聊聊等下的拍摄", 好感度变化: {十一: 5}, 下一场景: 2},
                    {文本: "回应白粥的调侃", 好感度变化: {白粥: 5}, 下一场景: 2}
                ]
            },
            
            // 第三场景：竹林拍摄
            2: {
                场景描述: "竹林里的光线果然很柔和，阳光透过竹叶的缝隙洒下来，形成斑驳的光影。白粥按照骑士的要求摆好姿势，整个人散发出强大的气场。",
                对话: [
                    {角色: "白粥", 文本: "某人看得这么认真，是不是被我惊艳到了？", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: gameData.playerName, 文本: "确实很惊艳，白粥你很适合这种御系风格，拍出来的效果肯定很好。"},
                    {角色: "稀音", 文本: "...", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg", 特殊: "稀音站在竹林边缘，看着你和白粥互动，眼神里的阴霾越来越浓。"},
                    {角色: "十一", 文本: "白粥姐姐好厉害啊，摆的姿势都好好看，气场好强！", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "骑士", 文本: "白粥，先休息一下，看看成片效果。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"}
                ],
                选项: [
                    {文本: "称赞白粥的拍摄表现", 好感度变化: {白粥: 10}, 下一场景: 3},
                    {文本: "走到稀音身边和她说话", 好感度变化: {稀音: 10}, 下一场景: 3, 隐藏检查: "稀音"},
                    {文本: "和十一一起看拍摄的照片", 好感度变化: {十一: 5}, 下一场景: 3},
                    {文本: "帮骑士整理设备", 好感度变化: {骑士: 5}, 下一场景: 3}
                ]
            },
            
            // 第四场景：樱树下拍摄
            3: {
                场景描述: "众人跟着骑士往樱树底下走去，樱花树长得枝繁叶茂，粉白的樱花开满了枝头，风一吹，花瓣簌簌飘落。",
                对话: [
                    {角色: "十一", 文本: "好的，主角哥哥！", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg", 特殊: "十一听到你的话，立刻露出更甜的笑容，眼神亮晶晶地看向你。"},
                    {角色: "稀音", 文本: "主角哥哥，你都没有好好看我，等下拍我的时候，主角哥哥也要一直看着我，好不好？", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: gameData.playerName, 文本: "好，等下拍你的时候，我会一直看着你，稀音你这么好看，拍出来的成片肯定会很惊艳。"},
                    {角色: "稀音", 文本: "嗯，谢谢主角哥哥，有主角哥哥这句话，我一定会好好配合拍摄的。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg", 特殊: "稀音嘴角勾起一抹温柔的笑意，可心里却在默默想着：主角哥哥只能看着我..."},
                    {角色: "白粥", 文本: "这个稀音，还真是够偏执的...", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg", 特殊: "白粥靠在樱树的树干上，看着稀音的小动作，嘴角勾起一抹冷笑。"}
                ],
                选项: [
                    {文本: "专注地看着十一拍摄", 好感度变化: {十一: 10}, 下一场景: 4},
                    {文本: "安慰稀音，承诺会看她拍摄", 好感度变化: {稀音: 10}, 下一场景: 4},
                    {文本: "询问白粥对稀音的看法", 好感度变化: {白粥: 5}, 下一场景: 4},
                    {文本: "帮骑士调整拍摄角度", 好感度变化: {骑士: 5}, 下一场景: 4}
                ]
            },
            
            // 第五场景：石桥拍摄与冲突
            4: {
                场景描述: "没过多久，稀音就换好古风襦裙从帐篷里走了出来，整个人就像从古风画卷里走出来的仙子，温柔又灵动。",
                对话: [
                    {角色: "十一", 文本: "稀音姐姐，你穿古风襦裙好好看啊，就像仙女一样！", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "白粥", 文本: "确实挺好看的，比平时穿连衣裙更有韵味。", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: "稀音", 文本: "主角哥哥，我穿这件襦裙好看吗？", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: gameData.playerName, 文本: "好看，非常好看。稀音你本来就长得好看，穿古风襦裙更显温柔灵动。"},
                    {角色: "稀音", 文本: "谢谢主角哥哥，只要主角哥哥觉得好看就好。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: "骑士", 文本: "稀音，你站在石桥中间，我先试拍几张。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"}
                ],
                选项: [
                    {文本: "专注地看稀音拍摄", 好感度变化: {稀音: 15}, 下一场景: 5},
                    {文本: "和十一讨论稀音的造型", 好感度变化: {十一: 5, 稀音: -5}, 下一场景: 5},
                    {文本: "和白粥聊天", 好感度变化: {白粥: 10, 稀音: -10}, 下一场景: 5, 隐藏检查: "稀音"},
                    {文本: "帮骑士拿道具", 好感度变化: {骑士: 10}, 下一场景: 5}
                ]
            },
            
            // 第六场景：冲突爆发点
            5: {
                场景描述: "稀音在拍照的时候，眼神总是时不时看向你。白粥一直留意着稀音的眼神变化，心里暗自警惕。",
                对话: [
                    {角色: "骑士", 文本: "接下来拍双人互动镜头，先拍主角和十一的甜系互动。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: "十一", 文本: "好呀好呀！我已经迫不及待想和主角哥哥拍互动镜头了！", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "稀音", 文本: "我都听主角哥哥的安排，只要能和主角哥哥拍互动镜头，我就很开心了。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg", 特殊: "稀音说着，眼神却闪过一丝不易察觉的冷意。"},
                    {角色: "白粥", 文本: "我没意见，不过骑士你可得好好拍。", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: "骑士", 文本: "主角，十一，你们坐在石桥旁边的草地上，十一你靠在主角的肩膀上。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: "稀音", 文本: "...", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg", 特殊: "稀音看着你和十一亲密互动，眼神里的阴霾瞬间变得浓郁，指尖死死攥着拳头。"}
                ],
                选项: [
                    {文本: "专心和十一拍摄，忽略稀音的反应", 好感度变化: {十一: 15, 稀音: -15}, 下一场景: 6},
                    {文本: "注意到稀音异常，缩短拍摄时间", 好感度变化: {稀音: 10, 十一: -5}, 下一场景: 6},
                    {文本: "让白粥帮忙安抚稀音", 好感度变化: {白粥: 10, 稀音: -10}, 下一场景: 6},
                    {文本: "提议先拍稀音的互动镜头", 好感度变化: {稀音: 20, 十一: -10, 白粥: -5}, 下一场景: 6}
                ]
            },
            
            // 第七场景：冲突爆发
            6: {
                场景描述: "稀音的情绪越来越激动，她悄悄从口袋里拿出一把小小的水果刀，藏在身后，手指紧紧握着刀柄，眼神死死地盯着白粥。",
                对话: [
                    {角色: "白粥", 文本: "稀音，你想干什么？把手里的刀拿出来！", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: gameData.playerName, 文本: "稀音，你手里拿着刀干什么？快点把刀放下！"},
                    {角色: "十一", 文本: "稀音姐姐，你、你怎么会有刀啊？你别吓我好不好…", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "骑士", 文本: "稀音，有什么事我们好好说，别冲动，快点把刀放下！", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: "稀音", 文本: "白粥姐姐，你为什么要抢走我的主角哥哥？主角哥哥是我的，只能是我的！你要是再靠近主角哥哥，我就杀了你！", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg", 特殊: "稀音的眼神里充满了疯狂的偏执，刀尖对着白粥。"},
                    {角色: "白粥", 文本: "我没有抢走你的主角哥哥，拍摄互动镜头只是按照计划来的！", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"}
                ],
                选项: [
                    {文本: "严厉训斥稀音，让她立即放下刀", 好感度变化: {稀音: -30, 白粥: 10, 十一: 5, 骑士: 5}, 下一场景: 7, 路线: "正常"},
                    {文本: "温柔安抚稀音，承诺不会离开她", 好感度变化: {稀音: 30, 白粥: -10, 十一: -5}, 下一场景: 7, 路线: "病娇", 隐藏检查: "稀音"},
                    {文本: "让骑士帮忙控制住稀音", 好感度变化: {骑士: 10, 稀音: -20, 白粥: 5}, 下一场景: 7},
                    {文本: "保护十一，让她远离危险", 好感度变化: {十一: 20, 稀音: -20}, 下一场景: 7}
                ]
            },
            
            // 第八场景：冲突解决
            7: {
                场景描述: "稀音被白粥抓住手腕，水果刀掉在了地上。稀音疯狂地挣扎，眼泪不停地流。",
                对话: [
                    {角色: "稀音", 文本: "放开我！我要杀了她！我要让她消失！主角哥哥是我的，只能是我的！", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: gameData.playerName, 文本: "稀音，别闹了，我们知道你很喜欢我，但是喜欢不是占有，更不是伤害别人！"},
                    {角色: "稀音", 文本: "主角哥哥，你是不是害怕我了？你是不是不想理我了？我不是故意要伤害别人的，我只是太害怕失去你了…", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: gameData.playerName, 文本: "稀音，我不会离开你，但是你必须答应我，以后不要再用这种极端的方式对待别人。"},
                    {角色: "稀音", 文本: "我答应你，主角哥哥，我以后再也不会这样了，我会好好改…", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: "白粥", 文本: "稀音，我希望你说到做到，以后不要再做出这种极端的事情。", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: "十一", 文本: "稀音姐姐，只要你以后好好的，我们还是好朋友。", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "骑士", 文本: "好了，事情已经解决了，我们先收拾东西，送稀音回去休息吧。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"}
                ],
                选项: [
                    {文本: "陪稀音回家，好好安慰她", 好感度变化: {稀音: 20}, 下一场景: 8, 路线: "病娇"},
                    {文本: "和骑士一起收拾道具", 好感度变化: {骑士: 15}, 下一场景: 8},
                    {文本: "送十一回家，确保她安全", 好感度变化: {十一: 20}, 下一场景: 8},
                    {文本: "和白粥聊聊刚才的事", 好感度变化: {白粥: 15}, 下一场景: 8}
                ]
            },
            
            // 第九场景：雨夜的救赎
            8: {
                场景描述: "拍摄结束后的第三天，天空下起了大雨。你接到骑士的电话，说稀音这几天一直把自己关在家里，不吃不喝。你们决定一起去看她。",
                对话: [
                    {角色: "骑士", 文本: "主角，稀音这几天一直把自己关在家里，不吃不喝，也不跟任何人说话，我们一起去看看她吧？", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: gameData.playerName, 文本: "好，我现在就过去，我们在稀音家楼下集合。"},
                    {角色: "叙述", 文本: "你赶到稀音家楼下，和骑士一起上楼。用稀音之前给你的备用钥匙打开门，发现房间里一片漆黑，窗帘拉得严严实实的。"},
                    {角色: gameData.playerName, 文本: "稀音，你在吗？"},
                    {角色: "叙述", 文本: "你们顺着光线往卧室走去，看到稀音蜷缩在床角，身上穿着一件单薄的睡衣，头发乱糟糟的，脸色苍白得没有一丝血色。"},
                    {角色: "稀音", 文本: "主角哥哥，你终于来看我了，我还以为你不会再理我了…", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: gameData.playerName, 文本: "我怎么会讨厌你呢？我只是担心你，这几天一直联系不到你，我心里一直很着急。"},
                    {角色: "稀音", 文本: "我…我知道我那天做错了，我害怕你们都讨厌我，害怕你们都离开我…", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: "骑士", 文本: "稀音，每个人都会犯错，只要你能认识到自己的错误，并且努力去改正，就没有人会讨厌你。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"}
                ],
                选项: [
                    {文本: "抱住稀音，温柔安慰她", 好感度变化: {稀音: 25}, 下一场景: 9, 路线: "病娇"},
                    {文本: "给稀音做点吃的", 好感度变化: {稀音: 20}, 下一场景: 9},
                    {文本: "联系白粥和十一过来帮忙", 好感度变化: {白粥: 10, 十一: 10, 稀音: 15}, 下一场景: 9},
                    {文本: "和骑士一起开导稀音", 好感度变化: {骑士: 15, 稀音: 10}, 下一场景: 9}
                ]
            },
            
            // 第十场景：关系发展与选择
            9: {
                场景描述: "从那天以后，稀音开始慢慢改变，性格变得越来越开朗。又是一个周末，阳光明媚，樱花依旧盛开，你们五人再次来到樱见庭。",
                对话: [
                    {角色: "稀音", 文本: "主角哥哥，你现在越来越开朗了，真好。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: gameData.playerName, 文本: "是啊，多亏了主角哥哥，还有骑士、白粥姐姐、十一妹妹..."},
                    {角色: "十一", 文本: "稀音姐姐，我们来拍照吧！", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "白粥", 文本: "今天天气真好，适合拍些轻松的照片。", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: "骑士", 文本: "我带了新相机，可以试试不同的风格。", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: "叙述", 文本: "风一吹，樱花簌簌飘落，落在每个人的身上。五人的欢声笑语在樱见庭里回荡，成为了春日里最美好的风景。"}
                ],
                选项: [
                    {文本: "走向稀音，和她单独说话", 好感度变化: {稀音: 30}, 结局: "稀音病娇结局", 条件: () => gameData.relationships.稀音.好感度 >= 100 && gameData.currentRoute === "病娇"},
                    {文本: "和十一一起欣赏樱花", 好感度变化: {十一: 30}, 结局: "十一纯爱结局", 条件: () => gameData.relationships.十一.好感度 >= 80},
                    {文本: "与白粥讨论摄影", 好感度变化: {白粥: 30}, 结局: "白粥御姐结局", 条件: () => gameData.relationships.白粥.好感度 >= 80},
                    {文本: "帮骑士设置相机", 好感度变化: {骑士: 30}, 结局: "骑士温柔结局", 条件: () => gameData.relationships.骑士.好感度 >= 80},
                    {文本: "邀请大家一起合影", 好感度变化: {白粥: 10, 稀音: 10, 十一: 10, 骑士: 10}, 结局: "四人修罗场结局", 条件: () => {
                        const relationships = gameData.relationships;
                        return relationships.白粥.好感度 >= 70 && relationships.稀音.好感度 >= 70 && 
                               relationships.十一.好感度 >= 70 && relationships.骑士.好感度 >= 70;
                    }},
                    {文本: "继续享受这美好时光", 下一场景: 10}
                ]
            },
            
            // 第十一场景：隐藏结局触发点
            10: {
                场景描述: "随着时间的推移，你和女孩们的关系不断发展。某个午后，你收到了多条邀请...",
                对话: [
                    {角色: "叙述", 文本: "你的手机同时收到了四条消息，来自四个不同的女孩..."},
                    {角色: "白粥", 文本: "今晚有空吗？我发现了一家很棒的酒吧，想请你一起去。", 头像: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg"},
                    {角色: "稀音", 文本: "主角哥哥，我做了你最喜欢的菜，晚上来我家吃饭好吗？", 头像: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg"},
                    {角色: "十一", 文本: "主角哥哥，新上映的电影好像很有趣，要一起去看吗？", 头像: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg"},
                    {角色: "骑士", 文本: "我发现了新的摄影地点，明天要不要一起去采风？", 头像: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg"},
                    {角色: gameData.playerName, 文本: "这...我该怎么做选择呢？"}
                ],
                选项: [
                    {文本: "接受白粥的邀请", 好感度变化: {白粥: 25}, 结局: "白粥专属结局"},
                    {文本: "去稀音家吃饭", 好感度变化: {稀音: 25}, 结局: "稀音专属结局"},
                    {文本: "和十一去看电影", 好感度变化: {十一: 25}, 结局: "十一专属结局"},
                    {文本: "与骑士去摄影", 好感度变化: {骑士: 25}, 结局: "骑士专属结局"},
                    {文本: "尝试同时回应所有人的邀请", 结局: "隐藏修罗场结局", 条件: () => Math.random() < 0.5 && gameData.hiddenTriggered},
                    {文本: "委婉拒绝所有人", 结局: "孤独结局"}
                ]
            }
        };
        
        // 游戏结局数据
        const gameEndings = {
            "稀音病娇结局": {
                标题: "你只能是我的",
                图片: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg",
                描述: `稀音的执念最终战胜了理智。在一个雨夜，你醒来发现自己被锁在一个陌生的房间里。稀音温柔地抚摸着你的脸，轻声说："主角哥哥，这样你就永远是我的了。我不会让任何人抢走你，白粥姐姐不行，十一妹妹也不行，骑士哥哥更不行。从今以后，你只能看着我，只能想着我，只能爱我一个人。"<br><br>起初你试图反抗，但稀音的偏执超乎你的想象。她辞去了工作，全心全意地"照顾"你。房间里摆满了你们的照片，每一张都被她精心装饰。她每天都会为你做饭，陪你说话，但绝不允许你离开这个房间半步。<br><br>日子一天天过去，你渐渐放弃了逃跑的念头。稀音的温柔与偏执交织在一起，形成了一种扭曲的爱。你成为了她世界中心的唯一存在，而她成为了你与外界联系的唯一桥梁。在这个被精心打造的牢笼里，你们的关系变成了一种病态的共生。`,
                类型: "病娇"
            },
            
            "四人修罗场结局": {
                标题: "甜蜜的负担",
                图片: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg",
                描述: `你做出了一个大胆的决定——尝试同时与四位女孩保持关系。起初这几乎是不可能的任务，需要精心安排时间，编造各种借口，时刻提防她们彼此相遇。<br><br>周一晚上陪白粥去酒吧，周三和稀音共进晚餐，周五与十一看电影，周末则和骑士外出摄影。你像走钢丝一样在四段关系间保持平衡，每一次约会都既甜蜜又紧张。<br><br>然而纸终究包不住火。某天，当你在咖啡厅与十一约会时，白粥恰巧路过。尴尬的相遇后，你不得不向所有人坦白。出乎意料的是，她们并没有立即离开你，反而展开了一场"竞争"。<br><br>最终，你们达成了一种微妙的平衡。四位女孩都成为了你的女友，但彼此知道对方的存在。你们约定每周有固定的见面时间，其他时间则互不干扰。这种关系复杂而微妙，充满了嫉妒、妥协和偶尔的争吵，但也带来了四倍的爱与关怀。`,
                类型: "修罗场"
            },
            
            "白粥专属结局": {
                标题: "御姐的温柔",
                图片: "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg",
                描述: `你选择了与白粥在一起。起初你以为会是一段充满调侃和互怼的关系，但白粥展现出了你从未见过的温柔一面。<br><br>她会在你加班时默默送来晚餐，在你生病时放下工作照顾你，在你遇到困难时用她独有的方式鼓励你。她的毒舌变成了调情的工具，她的高冷变成了只对你展露的柔软。<br><br>你们一起旅行，一起尝试各种新鲜事物。白粥教会你如何更自信地面对生活，而你让她学会了依赖和温柔。几年后，你们在樱见庭举行了婚礼，当初的四人组都来参加了。稀音虽然眼中仍有不舍，但已能微笑着祝福你们。<br><br>婚后的生活平淡而幸福。白粥继续着她的摄影事业，你也找到了自己的方向。每当樱花盛开时，你们都会回到樱见庭，回忆当初的相遇。`,
                类型: "纯爱"
            },
            
            "稀音专属结局": {
                标题: "执念的蜕变",
                图片: "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg",
                描述: `在你的耐心陪伴下，稀音逐渐走出了偏执的阴影。她开始接受心理咨询，学习如何健康地表达爱意。你们的关系从病态的占有变成了相互扶持的成长。<br><br>稀音重新找到了工作，在一家花店当店员。她温柔的性格和审美眼光让她很快成为了店里的明星员工。每天下班后，她都会带一束花回家，有时是给你的，有时是装饰你们的家。<br><br>你们一起养了一只猫，稀音给它起名叫"樱花"。看着稀音温柔地照顾猫咪的样子，你知道她已经真正改变了。她的执念转化为了对生活的热爱，而你也成为了她生命中重要但并非唯一的部分。<br><br>某个春日的午后，稀音在樱见庭向你求婚。她说："主角哥哥，是你让我学会了什么是健康的爱。现在，我想用我的一生来爱你，但不会束缚你。"你微笑着点头，樱花落在你们的肩上。`,
                类型: "治愈"
            },
            
            "十一专属结局": {
                标题: "甜妹的依赖",
                图片: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg",
                描述: `与十一在一起的日子充满了甜蜜和温暖。她总是用软糯的声音叫着"主角哥哥"，用崇拜的眼神看着你，让你感到无比被需要。<br><br>十一顺利考上了大学，选择了摄影专业。你常常陪她去各地采风，看着她从害羞的少女成长为自信的摄影师。她的作品总是充满温暖和希望，就像她本人一样。<br><br>毕业后，十一开了一家小小的摄影工作室，专门拍摄情侣和家庭照。你成为了她的专属模特和助手。工作室的墙上挂满了你们的照片，记录着一起走过的点点滴滴。<br><br>某个纪念日，十一为你准备了一个惊喜——一本厚厚的相册，里面是从你们相识到现在每一张有你的照片。"主角哥哥，"她红着脸说，"我的镜头里永远只会有你。"你将她拥入怀中，知道这个软萌的甜妹已经成为了你生命中最坚实的依靠。`,
                类型: "纯爱"
            },
            
            "骑士专属结局": {
                标题: "温柔的守候",
                图片: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg",
                描述: `你选择了与骑士在一起。这段关系开始时很平淡，像细水长流，但随着时间的流逝，你越发感受到其中的深度和温暖。<br><br>骑士总是温和有礼，细心周到。他会记得你的每一个喜好，在你需要时默默出现，从不过分索取。你们一起探索城市的每一个角落，用相机记录下每一个美好瞬间。<br><br>骑士的古风摄影工作室越来越有名气，而你成为了他最得力的助手和最默契的模特。你们一起参加汉服活动，学习传统文化，过着如古代文人般雅致的生活。<br><br>某个秋日的黄昏，骑士带你回到樱见庭。樱花早已凋谢，但枫叶正红。他单膝跪地，手中拿着一枚古风玉佩："愿以此佩，许你一生。青山为证，日月为鉴。"你接过玉佩，知道这个温润如古风侠客的男子，将是你一生的良人。`,
                类型: "古风"
            },
            
            "隐藏修罗场结局": {
                标题: "修罗场的偷欢",
                图片: "https://free.picui.cn/free/2025/12/14/693e381736408.jpg",
                描述: `你决定冒险一试，尝试回应所有人的邀请。这需要精密的计划和完美的演技，但你竟然成功了——至少在开始的时候。<br><br>你在同一晚安排了四场约会：傍晚陪十一看电影，电影结束后"偶然"遇到白粥，陪她去酒吧坐了一会儿；然后以"家里有事"为借口离开，赶往稀音家吃宵夜；最后告诉稀音你要早起工作，实际上去见了等待你已久的骑士。<br><br>这种双重生活持续了数月。你像一个时间管理大师，在四个女孩间周旋。每一次约会都刺激而危险，每一次撒谎都让你既愧疚又兴奋。女孩们开始察觉到一些异常，但你的演技和她们对你的感情让她们选择了相信。<br><br>然而，这种平衡不可能永远维持。在一个雨夜，当你刚从稀音家出来准备去见白粥时，你们三人在街头相遇了。尴尬的沉默后，白粥冷笑一声："看来我们的主角很忙啊。"稀音的眼神变得危险，而匆匆赶来的十一看到这一幕，眼泪瞬间涌出。<br><br>最终，你不得不做出选择...或者，选择全部。`,
                类型: "隐藏"
            },
            
            "孤独结局": {
                标题: "一个人的樱花",
                图片: "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg",
                描述: `你选择了委婉地拒绝所有人。起初女孩们感到失望和不解，但随着时间的推移，她们逐渐接受了这个事实。<br><br>白粥继续着她的摄影事业，成为了知名的时尚摄影师；稀音在心理咨询的帮助下逐渐康复，开始了新的生活；十一考上了理想的大学，专注于学业；骑士的古风摄影工作室越来越成功。<br><br>你们仍然保持联系，偶尔会像朋友一样聚会，但不再有当初的暧昧和紧张。樱花盛开时，你独自一人来到樱见庭，看着漫天飞舞的花瓣，回忆着那段复杂的时光。<br><br>有时你会想，如果当初做出了不同的选择，现在会怎样。但你知道，有些关系太过复杂，保持距离反而是最好的选择。你学会了享受孤独，也在等待那个真正适合你的人出现。<br><br>樱花年复一年地盛开，而生活，也在继续。`,
                类型: "现实"
            }
        };
        
        // 其他结局占位符
        for (let i = 1; i <= 6; i++) {
            const endingName = `其他结局${i}`;
            gameEndings[endingName] = {
                标题: `结局 ${i}`,
                图片: i % 4 === 1 ? "https://free.picui.cn/free/2025/12/14/693e373f18eaa.jpg" : 
                      i % 4 === 2 ? "https://free.picui.cn/free/2025/12/14/693e44f6b4b9e.jpg" :
                      i % 4 === 3 ? "https://free.picui.cn/free/2025/12/14/693e381736408.jpg" :
                      "https://free.picui.cn/free/2025/12/14/693e44f7246fa.jpg",
                描述: `这是游戏的结局 ${i}。根据你在游戏中的选择，你与女孩们的关系走向了不同的方向。<br><br>每个选择都有其后果，每个结局都是你旅程的一部分。你可以重新开始游戏，尝试不同的选择，解锁更多结局。`,
                类型: "普通"
            };
        }
        
        // DOM元素
        const screens = {
            title: document.getElementById('title-screen'),
            nameCreation: document.getElementById('name-creation-screen'),
            characterSelect: document.getElementById('character-select-screen'),
            game: document.getElementById('game-screen'),
            ending: document.getElementById('ending-screen'),
            statusBar: document.getElementById('status-bar')
        };
        
        const uiElements = {
            startBtn: document.getElementById('start-btn'),
            playerNameInput: document.getElementById('player-name'),
            confirmNameBtn: document.getElementById('confirm-name-btn'),
            characterCards: document.querySelectorAll('.character-card'),
            confirmCharacterBtn: document.getElementById('confirm-character-btn'),
            sceneDescription: document.getElementById('scene-description'),
            dialogueContainer: document.getElementById('dialogue-container'),
            optionsContainer: document.getElementById('options-container'),
            playerNameDisplay: document.getElementById('player-name-display'),
            mainCharacterDisplay: document.getElementById('main-character-display'),
            routeDisplay: document.getElementById('route-display'),
            selectionConfirm: document.getElementById('selection-confirm'),
            confirmTitle: document.getElementById('confirm-title'),
            confirmText: document.getElementById('confirm-text'),
            confirmYes: document.getElementById('confirm-yes'),
            confirmNo: document.getElementById('confirm-no')
        };
        
        // 游戏状态
        let currentSelection = null;
        let pendingChoice = null;
        
        // 初始化游戏
        function initGame() {
            // 检查是否有保存的游戏
            if (gameData.load()) {
                showScreen('game');
                updateStatusBar();
                loadScene(gameData.currentScene);
            } else {
                showScreen('title');
            }
            
            // 事件监听
            uiElements.startBtn.addEventListener('click', () => {
                showScreen('nameCreation');
            });
            
            uiElements.confirmNameBtn.addEventListener('click', confirmName);
            
            uiElements.playerNameInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') confirmName();
            });
            
            uiElements.characterCards.forEach(card => {
                card.addEventListener('click', () => {
                    uiElements.characterCards.forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    currentSelection = card.dataset.character;
                });
            });
            
            uiElements.confirmCharacterBtn.addEventListener('click', confirmCharacter);
            
            uiElements.confirmYes.addEventListener('click', () => {
                if (pendingChoice) {
                    handleChoice(pendingChoice);
                    hideSelectionConfirm();
                }
            });
            
            uiElements.confirmNo.addEventListener('click', hideSelectionConfirm);
        }
        
        // 显示指定屏幕
        function showScreen(screenName) {
            Object.values(screens).forEach(screen => {
                if (screen !== screens.statusBar) {
                    screen.classList.add('hidden');
                }
            });
            
            if (screenName === 'game') {
                screens.game.classList.remove('hidden');
                screens.statusBar.classList.remove('hidden');
            } else {
                screens[screenName].classList.remove('hidden');
                screens.statusBar.classList.add('hidden');
            }
        }
        
        // 确认名字
        function confirmName() {
            const name = uiElements.playerNameInput.value.trim();
            if (name.length < 2 || name.length > 10) {
                alert('名字长度应在2-10个字符之间');
                return;
            }
            
            gameData.playerName = name;
            showScreen('characterSelect');
        }
        
        // 确认角色选择
        function confirmCharacter() {
            if (!currentSelection) {
                alert('请选择一位攻略对象');
                return;
            }
            
            gameData.selectedCharacter = currentSelection;
            gameData.relationships[currentSelection].好感度 += 10; // 初始好感度加成
            
            // 更新显示
            uiElements.playerNameDisplay.textContent = gameData.playerName;
            uiElements.mainCharacterDisplay.textContent = currentSelection;
            uiElements.routeDisplay.textContent = gameData.currentRoute;
            
            // 保存并开始游戏
            gameData.save();
            showScreen('game');
            loadScene(0);
        }
        
        // 加载场景
        function loadScene(sceneId) {
            const scene = gameScenes[sceneId];
            if (!scene) {
                console.error(`场景 ${sceneId} 不存在`);
                return;
            }
            
            gameData.currentScene = sceneId;
            
            // 更新场景描述
            uiElements.sceneDescription.textContent = scene.场景描述;
            
            // 清空对话和选项
            uiElements.dialogueContainer.innerHTML = '';
            uiElements.optionsContainer.innerHTML = '';
            
            // 添加对话
            scene.对话.forEach(dialogue => {
                const dialogueElement = document.createElement('div');
                dialogueElement.className = 'character-dialogue';
                
                // 替换对话中的"主角"为玩家名字
                let dialogueText = dialogue.文本.replace(/主角/g, gameData.playerName);
                
                dialogueElement.innerHTML = `
                    <div class="character-name">${dialogue.角色 === gameData.playerName ? gameData.playerName : dialogue.角色}</div>
                    <div class="dialogue-text">${dialogueText}</div>
                `;
                
                // 添加头像（如果不是玩家）
                if (dialogue.角色 !== gameData.playerName && dialogue.头像) {
                    const avatar = document.createElement('img');
                    avatar.className = 'character-avatar';
                    avatar.src = dialogue.头像;
                    avatar.alt = dialogue.角色;
                    dialogueElement.appendChild(avatar);
                }
                
                // 添加特殊描述
                if (dialogue.特殊) {
                    const special = document.createElement('div');
                    special.className = 'hidden-trigger';
                    special.textContent = dialogue.特殊.replace(/主角/g, gameData.playerName);
                    dialogueElement.appendChild(special);
                }
                
                uiElements.dialogueContainer.appendChild(dialogueElement);
            });
            
            // 添加选项
            scene.选项.forEach((option, index) => {
                // 检查条件
                if (option.condition && !option.condition()) {
                    return;
                }
                
                // 检查隐藏触发
                if (option.隐藏检查 && gameData.selectedCharacter === option.隐藏检查) {
                    if (Math.random() < gameData.hiddenChance) {
                        gameData.hiddenTriggered = true;
                    }
                }
                
                const optionElement = document.createElement('button');
                optionElement.className = 'option-btn';
                optionElement.textContent = option.文本;
                optionElement.dataset.index = index;
                
                optionElement.addEventListener('click', () => {
                    // 如果有好感度变化，显示确认
                    if (option.好感度变化 || option.结局 || option.路线) {
                        showSelectionConfirm(option);
                    } else {
                        handleChoice(option);
                    }
                });
                
                uiElements.optionsContainer.appendChild(optionElement);
            });
            
            // 滚动到底部
            setTimeout(() => {
                uiElements.dialogueContainer.scrollTop = uiElements.dialogueContainer.scrollHeight;
            }, 100);
            
            // 更新状态栏
            updateStatusBar();
            
            // 保存游戏
            gameData.save();
        }
        
        // 显示选择确认
        function showSelectionConfirm(option) {
            pendingChoice = option;
            
            let confirmMessage = "你确定要选择这个选项吗？";
            if (option.好感度变化) {
                const changes = [];
                for (const [character, value] of Object.entries(option.好感度变化)) {
                    changes.push(`${character}: ${value > 0 ? '+' : ''}${value}`);
                }
                confirmMessage += `<br>好感度变化: ${changes.join(', ')}`;
            }
            
            if (option.路线) {
                confirmMessage += `<br>路线变更: ${option.路线}`;
            }
            
            uiElements.confirmText.innerHTML = confirmMessage;
            uiElements.selectionConfirm.classList.remove('hidden');
        }
        
        // 隐藏选择确认
        function hideSelectionConfirm() {
            uiElements.selectionConfirm.classList.add('hidden');
            pendingChoice = null;
        }
        
        // 处理选择
        function handleChoice(option) {
            // 记录选择
            gameData.choices.push({
                场景: gameData.currentScene,
                选项: option.文本,
                时间: new Date().toISOString()
            });
            
            // 更新好感度
            if (option.好感度变化) {
                for (const [character, value] of Object.entries(option.好感度变化)) {
                    if (gameData.relationships[character]) {
                        gameData.relationships[character].好感度 += value;
                        // 限制好感度在0-100之间
                        gameData.relationships[character].好感度 = Math.max(0, Math.min(100, gameData.relationships[character].好感度));
                    }
                }
            }
            
            // 更新路线
            if (option.路线) {
                gameData.currentRoute = option.路线;
            }
            
            // 检查是否触发结局
            if (option.结局) {
                showEnding(option.结局);
                return;
            }
            
            // 否则加载下一场景
            if (option.下一场景 !== undefined) {
                loadScene(option.下一场景);
            }
            
            // 更新状态栏
            updateStatusBar();
            
            // 保存游戏
            gameData.save();
        }
        
        // 显示结局
        function showEnding(endingName) {
            const ending = gameEndings[endingName];
            if (!ending) {
                console.error(`结局 ${endingName} 不存在`);
                return;
            }
            
            // 添加到已解锁结局
            if (!gameData.endingsUnlocked.includes(endingName)) {
                gameData.endingsUnlocked.push(endingName);
            }
            
            // 更新结局屏幕
            const endingContainer = document.querySelector('.ending-container');
            endingContainer.innerHTML = `
                <h2 class="ending-title">${ending.标题}</h2>
                <img src="${ending.图片}" alt="${ending.标题}" class="ending-image">
                <div class="ending-description">${ending.描述.replace(/主角/g, gameData.playerName)}</div>
                <div style="margin-top: 20px; color: #666; font-size: 0.9rem;">
                    <i class="fas fa-tag"></i> 结局类型: ${ending.类型}
                </div>
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button id="restart-btn" class="btn btn-secondary">
                        <i class="fas fa-redo"></i> 重新开始
                    </button>
                    <button id="back-to-title-btn" class="btn">
                        <i class="fas fa-home"></i> 返回标题
                    </button>
                </div>
                <div style="margin-top: 20px; color: #888; font-size: 0.9rem;">
                    已解锁结局: ${gameData.endingsUnlocked.length} / 14
                </div>
            `;
            
            showScreen('ending');
            
            // 添加事件监听
            document.getElementById('restart-btn').addEventListener('click', restartGame);
            document.getElementById('back-to-title-btn').addEventListener('click', () => {
                showScreen('title');
            });
            
            // 保存游戏
            gameData.save();
        }
        
        // 重新开始游戏
        function restartGame() {
            if (confirm('确定要重新开始游戏吗？当前进度将丢失。')) {
                gameData.reset();
                showScreen('nameCreation');
            }
        }
        
        // 更新状态栏
        function updateStatusBar() {
            uiElements.playerNameDisplay.textContent = gameData.playerName;
            uiElements.mainCharacterDisplay.textContent = gameData.selectedCharacter || "未选择";
            uiElements.routeDisplay.textContent = gameData.currentRoute;
            
            // 更新角色卡片上的好感度显示
            uiElements.characterCards.forEach(card => {
                const character = card.dataset.character;
                if (character && gameData.relationships[character]) {
                    const moodIndicator = card.querySelector('.mood-indicator span:last-child');
                    if (moodIndicator) {
                        moodIndicator.textContent = `好感度: ${gameData.relationships[character].好感度}`;
                    }
                }
            });
        }
        
        // 页面加载完成后初始化游戏
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
